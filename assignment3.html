<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        p {
            margin-left: 0;
            margin-bottom: 10px;
            margin-top: 10px;
            border: 0x solid gray;
            padding: 10px;
            transition: 100ms;
        }

        .hoverIndent {
            margin-left: 5px;
            margin-bottom: 10px;
            margin-top: 10px;
            border: 0px solid gray;
            padding: 10px;
            transition: 500ms;
        }

        .hoverReset {
            margin-left: 0;
            margin-bottom: 10px;
            margin-top: 10px;
            border: 0x solid gray;
            padding: 10px;
            transition: 500ms;
        }

        h3 {
            color: gray;
            font-weight: 400;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            font-size: 1em;
        }

        h1 {
            color: black;
            font-weight: 500;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            font-size: 2.5em;
        }
    </style>
</head>

<body>
    <h1 id="heading1">Click Add to Cart to add items</h1>
    <h3>Hover on Album title to see descriptions</h3>
    <p id="item1">"OK Computer"</p>
    <p>Price: $10</p>
    <button class="btn" data-added="no" data-price="10">Add to cart</button>
    <hr />
    <p id="item2">"Hail to the Thief"</p>
    <p>Price: $15</p>
    <button class="btn" data-added="no" data-price="15">Add to cart</button>
    <hr />
    <p id="item3">"In Rainbows"</p>
    <p>Price: $20</p>
    <button class="btn" data-added="no" data-price="20">Add to cart</button>
    <hr />
    <p id="total">Cart total</p>

    <label>Enter payment amount</label>
    <input type="number" id="payment" value=0 />
    <button id="payBtn">Pay</button>
    <P id="status">Purchase status</P>
    <script>
        document.onreadystatechange = () => {
            if (document.readyState === "complete") {
                var price1 = "10";
                var price2 = "15";
                var price3 = "20";
                var cartTotal = 0;

                // create an array of prices
                let prices = [10, 20, 30];

                var button = document.querySelectorAll(".btn")[0];
                var para2 = document.querySelector("#item2");
                para2.addEventListener("mouseover", changeColor);
                para2.addEventListener("mouseout", changeColorBack);
                para2.addEventListener("mouseover", descrip2);
                para2.addEventListener("mouseout", title2);


                // button.addEventListener('mouseover', whenClicked);
                button.addEventListener("mouseout", whenOut);

                var p2content = para2.textContent;

                var para1 = document.querySelector("#item1");
                para1.addEventListener("mouseover", changeColor);
                para1.addEventListener("mouseout", changeColorBack);
                para1.addEventListener("mouseover", descrip1);
                para1.addEventListener("mouseout", title1);

                var para3 = document.querySelector("#item3");
                para3.addEventListener("mouseover", changeColor);
                para3.addEventListener("mouseout", changeColorBack);
                para3.addEventListener("mouseover", descrip3);
                para3.addEventListener("mouseout", title3);
                // function definitions ///////

                function changeColor() {
                    this.style.backgroundColor = "#E8E8E8";
                    this.className = "hoverIndent";

                }

                function changeColorBack() {
                    this.style.backgroundColor = "white";
                    this.className = "hoverReset";

                }

                // texts
                function descrip1() {
                    this.textContent = "OK Computer is the third studio album by the English rock band Radiohead, released in the UK on 16 June 1997 by EMI. With their producer, Nigel Godrich, Radiohead recorded most of OK Computer in their rehearsal space in Oxfordshire and the historic mansion of St Catherine's Court in Bath in 1996 and early 1997";

                }
                function title1() {
                    this.textContent = "OK Computer";
                }
                function descrip2() {
                    this.textContent = "Hail to the Thief is the sixth studio album by the English rock band Radiohead. It was released on 9 June 2003 through Parlophone internationally and a day later through Capitol Records in the United States";

                }
                function title2() {
                    this.textContent = "Hail to the Thief";
                } function descrip3() {
                    this.textContent = "In Rainbows is the seventh studio album by the English rock band Radiohead. It was self-released on 10 October 2007 as a pay-what-you-want download, followed by a physical release internationally through XL Recordings on 3 December 2007 and in North America through TBD Records on 1 January 2008";

                }
                function title3() {
                    this.textContent = "In Rainbows";
                }
            }

            var para2 = document.querySelector("#addtoCart");
            // para1.addEventListener("clicked", price1);
            // para2.addEventListener = ()
            // }
            function whenOut() {
                para2.textContent = p2content;
            }

            // ----

            totalDiv = document.querySelector("#total");

            var buttons = document.querySelectorAll(".btn").length;

            var payBtn = document.querySelector("#payBtn");


            payBtn.addEventListener("click", function () {
                var paymentValue = parseInt(document.getElementById("payment").value);
                let statusUpdate = document.querySelector("#status");
                if (paymentValue === cartTotal && cartTotal != 0) {
                    console.log("Payed!")
                    statusUpdate.style.backgroundColor = "#D5FFDB";
                    statusUpdate.style.color = "#395742";
                    statusUpdate.textContent = "Purchase complete!";
                }
                else if (cartTotal == 0) {
                    console.log("Nothing added")
                    statusUpdate.style.backgroundColor = "#FFDFE0";
                    statusUpdate.style.color = "#C40F0F";
                    statusUpdate.textContent = "You have not added anything to the cart yet. ";
                }
                else {
                    console.log("Failed!")
                    statusUpdate.style.backgroundColor = "#FFDFE0";
                    statusUpdate.style.color = "#C40F0F";
                    statusUpdate.textContent = "Pyament amount is not equal to total purchase";
                }
            });

            for (var i = 0; i < buttons; i++) {
                document
                    .querySelectorAll(".btn")
                [i].addEventListener("click", function () {
                    // get the price from the button's data-price attribute
                    let added = this.getAttribute("data-added");
                    this.dataset.added = "yes";
                    this.disabled = true;
                    let price = parseInt(this.getAttribute("data-price"));
                    // update the total price by adding the price
                    cartTotal += price;
                    // update the div element with the new total price
                    totalDiv.innerHTML = "Cart total " + cartTotal;
                });
            }
        }

    </script>
</body>

</html>